<div class="visualizer-container">
    <div class="visualizer" id="visualizer">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </div>
    <button class="start-button" id="startBtn" aria-label="Start listening">â–¶</button>
    <div class="status" id="status">Click to start</div>
</div>

<div id="error" class="error" role="alert"></div>

<section class="controls">
    <div class="control-group">
        <div class="control-label">
            <label>Mode</label>
        </div>
        <div class="mode-toggle">
            <button class="mode-option active" data-mode="delay">Simple Delay</button>
            <button class="mode-option" data-mode="echo">Echo Loop</button>
        </div>
    </div>

    <div class="control-group">
        <div class="control-label">
            <label for="delaySlider">Delay</label>
            <span class="control-value" id="delayValue">2.0s</span>
        </div>
        <input type="range" id="delaySlider" min="0.5" max="5" step="0.1" value="2">
    </div>

    <div class="control-group" id="echoControls" style="display: none;">
        <div class="control-label">
            <label for="decaySlider">Echo Decay</label>
            <span class="control-value" id="decayValue">40%</span>
        </div>
        <input type="range" id="decaySlider" min="0.1" max="0.8" step="0.05" value="0.4">
    </div>

    <div class="control-group">
        <div class="control-label">
            <label for="volumeSlider">Volume</label>
            <span class="control-value" id="volumeValue">80%</span>
        </div>
        <input type="range" id="volumeSlider" min="0.1" max="2" step="0.1" value="0.8">
    </div>
</section>

<div class="info">
    <h3>How it works</h3>
    <ul>
        <li><strong>Simple Delay:</strong> Plays back audio once after the set delay</li>
        <li><strong>Echo Loop:</strong> Audio repeats and fades with each echo</li>
        <li>The delayed auditory feedback (DAF) effect can disrupt speech fluency</li>
        <li>Works best with headphones to prevent actual audio feedback</li>
    </ul>
</div>
