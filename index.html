<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noah's Tools</title>
    <style>
        /* ===== Theme Variables ===== */
        :root {
            --color-bg: #f8f9fa;
            --color-surface: #ffffff;
            --color-text: #1a1a2e;
            --color-text-muted: #6c757d;
            --color-border: #dee2e6;
            --color-primary: #4a90e2;
            --color-primary-hover: #357abd;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        [data-theme="dark"] {
            --color-bg: #1a1a2e;
            --color-surface: #252542;
            --color-text: #e8e8e8;
            --color-text-muted: #a0a0a0;
            --color-border: #3d3d5c;
            --color-primary: #5c9ce6;
            --color-primary-hover: #7ab3f0;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        /* ===== Base Styles ===== */
        * { box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                         Helvetica, Arial, sans-serif;
            background: var(--color-bg);
            color: var(--color-text);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            line-height: 1.6;
            transition: background 0.3s, color 0.3s;
        }

        /* ===== Header ===== */
        .site-header {
            background: var(--color-surface);
            border-bottom: 1px solid var(--color-border);
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .site-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: var(--color-text);
            font-weight: 600;
            font-size: 18px;
        }

        .site-logo img {
            height: 32px;
            width: auto;
        }

        .logo-dark { display: none; }
        .logo-light { display: block; }
        [data-theme="dark"] .logo-dark { display: block; }
        [data-theme="dark"] .logo-light { display: none; }

        .theme-toggle {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 6px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.2s;
        }

        .theme-toggle:hover {
            background: var(--color-bg);
        }

        /* ===== Main Content ===== */
        main {
            max-width: 900px;
            margin: 0 auto;
            padding: 32px 20px;
        }

        h1 {
            margin: 0 0 8px 0;
            font-size: 28px;
        }

        .tagline {
            color: var(--color-text-muted);
            margin: 0 0 32px 0;
            font-size: 16px;
        }

        /* ===== Search ===== */
        .search-container {
            background: var(--color-surface);
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
            margin-bottom: 32px;
        }

        .search-input-wrapper {
            position: relative;
        }

        .search-icon {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--color-text-muted);
            pointer-events: none;
        }

        #search-input {
            width: 100%;
            padding: 14px 14px 14px 44px;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            background: var(--color-bg);
            color: var(--color-text);
            font-size: 16px;
            transition: border-color 0.2s;
        }

        #search-input:focus {
            outline: none;
            border-color: var(--color-primary);
        }

        #search-input::placeholder {
            color: var(--color-text-muted);
        }

        .search-hint {
            margin: 10px 0 0 0;
            font-size: 13px;
            color: var(--color-text-muted);
        }

        .search-hint kbd {
            background: var(--color-bg);
            border: 1px solid var(--color-border);
            border-radius: 4px;
            padding: 2px 6px;
            font-family: inherit;
            font-size: 12px;
        }

        /* ===== Tool List ===== */
        .tools-section {
            margin-bottom: 32px;
        }

        .tools-section h2 {
            font-size: 18px;
            margin: 0 0 16px 0;
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .tool-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .tool-item {
            background: var(--color-surface);
            border-radius: 8px;
            box-shadow: var(--shadow);
            transition: transform 0.15s, box-shadow 0.15s;
        }

        .tool-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
        }

        .tool-item a {
            display: block;
            padding: 16px;
            text-decoration: none;
            color: inherit;
        }

        .tool-title {
            font-weight: 600;
            color: var(--color-text);
            margin-bottom: 4px;
        }

        .tool-description {
            font-size: 14px;
            color: var(--color-text-muted);
            margin: 0;
        }

        .tool-item.hidden {
            display: none;
        }

        .no-results {
            background: var(--color-surface);
            border-radius: 8px;
            padding: 24px;
            text-align: center;
            color: var(--color-text-muted);
            display: none;
        }

        .no-results.visible {
            display: block;
        }

        /* ===== Empty State ===== */
        .empty-state {
            background: var(--color-surface);
            border-radius: 8px;
            padding: 48px 24px;
            text-align: center;
            color: var(--color-text-muted);
        }

        .empty-state p {
            margin: 0;
        }

        /* ===== Footer ===== */
        .site-footer {
            text-align: center;
            padding: 24px;
            color: var(--color-text-muted);
            font-size: 14px;
            border-top: 1px solid var(--color-border);
            margin-top: 48px;
        }

        .site-footer a {
            color: var(--color-primary);
            text-decoration: none;
        }

        .site-footer a:hover {
            text-decoration: underline;
        }

        /* ===== Responsive ===== */
        @media (max-width: 600px) {
            main { padding: 20px 12px; }
            h1 { font-size: 24px; }
            .search-container { padding: 16px; }
        }
    </style>
</head>
<body>
    <header class="site-header">
        <a href="/" class="site-logo">
            <img src="assets/logo-black-64.png" alt="" class="logo-light">
            <img src="assets/logo-white-64.png" alt="" class="logo-dark">
            <span>Noah's Tools</span>
        </a>
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
            ðŸŒ™
        </button>
    </header>

    <main>
        <h1>Tools</h1>
        <p class="tagline">A collection of single-file HTML tools, built with the help of LLMs.</p>

        <div class="search-container">
            <div class="search-input-wrapper">
                <span class="search-icon">
                    <svg width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="9" cy="9" r="6"/>
                        <line x1="13.5" y1="13.5" x2="18" y2="18" stroke-linecap="round"/>
                    </svg>
                </span>
                <input type="search" id="search-input" placeholder="Search tools..." autocomplete="off">
            </div>
            <p class="search-hint">Press <kbd>/</kbd> to focus search</p>
        </div>

        <div id="tools-container">
            <!-- Tools will be populated here -->
            <div class="empty-state" id="empty-state">
                <p>No tools yet. Use <code>/tool</code> to create your first one!</p>
            </div>
        </div>

        <div class="no-results" id="no-results">
            No tools match your search.
        </div>
    </main>

    <footer class="site-footer">
        <a href="https://github.com/noahkiss/tools">View on GitHub</a>
    </footer>

    <script>
        // ===== Theme Toggle =====
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;

        const savedTheme = localStorage.getItem('theme');
        const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const initialTheme = savedTheme || (systemDark ? 'dark' : 'light');
        html.setAttribute('data-theme', initialTheme);
        themeToggle.textContent = initialTheme === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';

        themeToggle.addEventListener('click', () => {
            const current = html.getAttribute('data-theme');
            const next = current === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
            themeToggle.textContent = next === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
        });

        // ===== Tools Data =====
        // This will be populated by the build script or manually
        const tools = [
                {
                        "slug": "har-analyzer",
                        "title": "HAR Analyzer",
                        "description": "Upload a HAR file to extract API calls and document requests into a simplified YAML workflow with dependency detection and a visual flow diagram.",
                        "category": "Development"
                },
                {
                        "slug": "jiradown",
                        "title": "Jiradown",
                        "description": "Bidirectional converter between Jira Server wiki markup and Markdown. Edit either pane and the other updates in real-time.",
                        "category": "Text & Data"
                },
                {
                        "slug": "stfu",
                        "title": "STFU",
                        "description": "Audio feedback looper that captures microphone input and plays it back with a configurable delay. Features two modes: Simple Delay (hear yourself once after a delay) and Echo Loop (audio repeats and gradually fades). The delayed auditory feedback (DAF) effect can disrupt speech fluency, making it useful for... encouraging others to be quiet. Works best with headphones to prevent actual audio feedback loops.",
                        "category": "Utilities"
                }
        ];

        // ===== Render Tools =====
        function renderTools() {
            const container = document.getElementById('tools-container');
            const emptyState = document.getElementById('empty-state');

            if (tools.length === 0) {
                emptyState.style.display = 'block';
                return;
            }

            emptyState.style.display = 'none';

            // Group tools by category
            const categories = {};
            tools.forEach(tool => {
                const cat = tool.category || 'Utilities';
                if (!categories[cat]) categories[cat] = [];
                categories[cat].push(tool);
            });

            let html = '';
            for (const [category, categoryTools] of Object.entries(categories)) {
                html += `
                    <section class="tools-section" data-category="${category}">
                        <h2>${category}</h2>
                        <ul class="tool-list">
                            ${categoryTools.map(tool => `
                                <li class="tool-item" data-title="${tool.title.toLowerCase()}" data-description="${(tool.description || '').toLowerCase()}">
                                    <a href="${tool.slug}/">
                                        <div class="tool-title">${tool.title}</div>
                                        ${tool.description ? `<p class="tool-description">${tool.description}</p>` : ''}
                                    </a>
                                </li>
                            `).join('')}
                        </ul>
                    </section>
                `;
            }

            container.innerHTML = html;
        }

        // ===== Search =====
        const searchInput = document.getElementById('search-input');
        const noResults = document.getElementById('no-results');

        function performSearch() {
            const query = searchInput.value.toLowerCase().trim();
            const toolItems = document.querySelectorAll('.tool-item');
            const sections = document.querySelectorAll('.tools-section');

            if (!query) {
                toolItems.forEach(item => item.classList.remove('hidden'));
                sections.forEach(section => section.style.display = 'block');
                noResults.classList.remove('visible');
                return;
            }

            let visibleCount = 0;

            toolItems.forEach(item => {
                const title = item.dataset.title || '';
                const description = item.dataset.description || '';
                const matches = title.includes(query) || description.includes(query);
                item.classList.toggle('hidden', !matches);
                if (matches) visibleCount++;
            });

            // Hide empty sections
            sections.forEach(section => {
                const visibleTools = section.querySelectorAll('.tool-item:not(.hidden)');
                section.style.display = visibleTools.length > 0 ? 'block' : 'none';
            });

            noResults.classList.toggle('visible', visibleCount === 0 && tools.length > 0);
        }

        searchInput.addEventListener('input', performSearch);

        // "/" keyboard shortcut
        document.addEventListener('keydown', (e) => {
            if (e.key === '/' && !['INPUT', 'TEXTAREA'].includes(document.activeElement.tagName)) {
                e.preventDefault();
                searchInput.focus();
                searchInput.select();
            }
        });

        // Initialize
        renderTools();
    </script>
</body>
</html>
