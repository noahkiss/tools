<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>Noah's Tools</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mshaugh/nerdfont-webfonts@v3.3.0/build/jetbrainsmono-nerd-font.css">
    <style>
        /* ===== Catppuccin Latte (Light) ===== */
        :root:not([data-theme="dark"]),
        [data-theme="light"] {
            --pico-background-color: #eff1f5;
            --pico-color: #4c4f69;
            --pico-muted-color: #9ca0b0;
            --pico-primary: #1e66f5;
            --pico-primary-hover: #1754c7;
            --pico-primary-focus: rgba(30, 102, 245, 0.25);
            --pico-primary-inverse: #ffffff;
            --pico-secondary: #8c8fa1;
            --pico-secondary-hover: #6c6f85;
            --pico-card-background-color: #ffffff;
            --pico-card-border-color: #ccd0da;
            --pico-card-sectioning-background-color: #e6e9ef;
            --pico-form-element-background-color: #ffffff;
            --pico-form-element-border-color: #ccd0da;
            --pico-form-element-focus-color: var(--pico-primary);
            --pico-code-background-color: #e6e9ef;
            --pico-code-color: #4c4f69;
            --pico-table-border-color: #ccd0da;
            --pico-muted-border-color: #ccd0da;
        }

        /* ===== Catppuccin Mocha (Dark) ===== */
        [data-theme="dark"] {
            --pico-background-color: #1e1e2e;
            --pico-color: #cdd6f4;
            --pico-muted-color: #a6adc8;
            --pico-primary: #89b4fa;
            --pico-primary-hover: #b4d0fb;
            --pico-primary-focus: rgba(137, 180, 250, 0.25);
            --pico-primary-inverse: #1e1e2e;
            --pico-secondary: #a6adc8;
            --pico-secondary-hover: #bac2de;
            --pico-card-background-color: #313244;
            --pico-card-border-color: #45475a;
            --pico-card-sectioning-background-color: #181825;
            --pico-form-element-background-color: #313244;
            --pico-form-element-border-color: #45475a;
            --pico-form-element-focus-color: var(--pico-primary);
            --pico-code-background-color: #181825;
            --pico-code-color: #cdd6f4;
            --pico-table-border-color: #45475a;
            --pico-muted-border-color: #45475a;
        }

        /* ===== Backward-compatible aliases ===== */
        :root, [data-theme="light"] {
            --color-bg: var(--pico-background-color);
            --color-surface: var(--pico-card-background-color);
            --color-text: var(--pico-color);
            --color-text-muted: var(--pico-muted-color);
            --color-border: var(--pico-card-border-color);
            --color-primary: var(--pico-primary);
            --color-primary-hover: var(--pico-primary-hover);
            --color-error: #d20f39;
            --color-error-bg: #fce4e8;
            --color-success: #40a02b;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }

        [data-theme="dark"] {
            --color-error: #f38ba8;
            --color-error-bg: #3d2a2a;
            --color-success: #a6e3a1;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        /* ===== Code font ===== */
        pre, code, kbd, samp {
            font-family: 'JetBrains Mono Nerd Font', monospace;
        }

        /* ===== Header ===== */
        .site-header {
            background: var(--pico-card-background-color);
            border-bottom: 1px solid var(--pico-card-border-color);
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .site-header .site-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none !important;
            color: inherit !important;
            font-weight: 600;
            font-size: 18px;
        }

        .site-logo img {
            height: 32px;
            width: auto;
        }

        .logo-dark { display: none; }
        .logo-light { display: block; }
        [data-theme="dark"] .logo-dark { display: block; }
        [data-theme="dark"] .logo-light { display: none; }

        .theme-toggle {
            background: var(--pico-card-background-color);
            border: 1px solid var(--pico-card-border-color);
            border-radius: 6px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 16px;
            color: var(--pico-color);
            transition: background 0.2s;
        }

        .theme-toggle:hover {
            background: var(--pico-background-color);
        }

        /* ===== Main Content ===== */
        main.container {
            --pico-container-max-width: 900px;
        }

        .tagline {
            color: var(--pico-muted-color);
            margin: 0 0 32px 0;
        }

        /* ===== Search ===== */
        .search-container {
            background: var(--pico-card-background-color);
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
            margin-bottom: 32px;
        }

        #search-input {
            margin-bottom: 0;
        }

        .search-hint {
            margin: 10px 0 0 0;
            font-size: 13px;
            color: var(--pico-muted-color);
        }

        /* ===== Tool List ===== */
        .tools-section {
            margin-bottom: 32px;
        }

        .tools-section h2 {
            font-size: 18px;
            margin: 0 0 16px 0;
            color: var(--pico-muted-color);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        ul.tool-list {
            list-style-type: none;
            padding-left: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .tool-item {
            list-style-type: none;
            background: var(--pico-card-background-color);
            border-radius: 8px;
            box-shadow: var(--shadow);
            transition: transform 0.15s, box-shadow 0.15s;
        }

        .tool-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
        }

        .tool-item a {
            display: block;
            padding: 16px;
            text-decoration: none;
            color: inherit;
        }

        .tool-title {
            font-weight: 600;
            color: var(--pico-color);
            margin-bottom: 4px;
        }

        .tool-description {
            font-size: 14px;
            color: var(--pico-muted-color);
            margin: 0;
        }

        .tool-item.hidden {
            display: none;
        }

        .no-results {
            background: var(--pico-card-background-color);
            border-radius: 8px;
            padding: 24px;
            text-align: center;
            color: var(--pico-muted-color);
            display: none;
        }

        .no-results.visible {
            display: block;
        }

        /* ===== Empty State ===== */
        .empty-state {
            background: var(--pico-card-background-color);
            border-radius: 8px;
            padding: 48px 24px;
            text-align: center;
            color: var(--pico-muted-color);
        }

        .empty-state p {
            margin: 0;
        }

        /* ===== Footer ===== */
        .site-footer {
            text-align: center;
            padding: 24px;
            color: var(--pico-muted-color);
            font-size: 14px;
            border-top: 1px solid var(--pico-card-border-color);
            margin-top: 48px;
        }

        .site-footer a {
            color: var(--pico-primary);
            text-decoration: none;
        }

        .site-footer a:hover {
            text-decoration: underline;
        }

        /* ===== Responsive ===== */
        @media (max-width: 600px) {
            .search-container { padding: 16px; }
        }
    </style>
</head>
<body>
    <header class="site-header">
        <a href="/" class="site-logo">
            <img src="assets/logo-black-64.png" alt="" class="logo-light">
            <img src="assets/logo-white-64.png" alt="" class="logo-dark">
            <span>Noah's Tools</span>
        </a>
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
            ðŸŒ™
        </button>
    </header>

    <main class="container">
        <h1>Tools</h1>
        <p class="tagline">A collection of single-file HTML tools, built with the help of LLMs.</p>

        <div class="search-container">
            <input type="search" id="search-input" placeholder="Search tools..." autocomplete="off">
            <p class="search-hint">Press <kbd>/</kbd> to focus search</p>
        </div>

        <div id="tools-container">
            <!-- Tools will be populated here -->
            <div class="empty-state" id="empty-state">
                <p>No tools yet. Use <code>/tool</code> to create your first one!</p>
            </div>
        </div>

        <div class="no-results" id="no-results">
            No tools match your search.
        </div>
    </main>

    <footer class="site-footer">
        <a href="https://github.com/noahkiss/tools">View on GitHub</a>
    </footer>

    <script>
        // ===== Theme Toggle =====
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;

        const savedTheme = localStorage.getItem('theme');
        const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const initialTheme = savedTheme || (systemDark ? 'dark' : 'light');
        html.setAttribute('data-theme', initialTheme);
        themeToggle.textContent = initialTheme === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';

        themeToggle.addEventListener('click', () => {
            const current = html.getAttribute('data-theme');
            const next = current === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
            themeToggle.textContent = next === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
        });

        // ===== Tools Data =====
        // This will be populated by the build script or manually
        const tools = [
                {
                        "slug": "har-analyzer",
                        "title": "HAR Analyzer",
                        "description": "Upload a HAR file to extract API calls and document requests into a simplified YAML workflow with dependency detection and a visual flow diagram.",
                        "category": "Development"
                },
                {
                        "slug": "jiradown",
                        "title": "Jiradown",
                        "description": "Bidirectional converter between Jira Server wiki markup and Markdown. Edit either pane and the other updates in real-time.",
                        "category": "Text & Data"
                },
                {
                        "slug": "stfu",
                        "title": "STFU",
                        "description": "Audio feedback looper that captures microphone input and plays it back with a configurable delay. Features two modes: Simple Delay (hear yourself once after a delay) and Echo Loop (audio repeats and gradually fades). The delayed auditory feedback (DAF) effect can disrupt speech fluency, making it useful for... encouraging others to be quiet. Works best with headphones to prevent actual audio feedback loops.",
                        "category": "Utilities"
                }
        ];

        // ===== Render Tools =====
        function renderTools() {
            const container = document.getElementById('tools-container');
            const emptyState = document.getElementById('empty-state');

            if (tools.length === 0) {
                emptyState.style.display = 'block';
                return;
            }

            emptyState.style.display = 'none';

            // Group tools by category
            const categories = {};
            tools.forEach(tool => {
                const cat = tool.category || 'Utilities';
                if (!categories[cat]) categories[cat] = [];
                categories[cat].push(tool);
            });

            let html = '';
            for (const [category, categoryTools] of Object.entries(categories)) {
                html += `
                    <section class="tools-section" data-category="${category}">
                        <h2>${category}</h2>
                        <ul class="tool-list">
                            ${categoryTools.map(tool => `
                                <li class="tool-item" data-title="${tool.title.toLowerCase()}" data-description="${(tool.description || '').toLowerCase()}">
                                    <a href="${tool.slug}/">
                                        <div class="tool-title">${tool.title}</div>
                                        ${tool.description ? `<p class="tool-description">${tool.description}</p>` : ''}
                                    </a>
                                </li>
                            `).join('')}
                        </ul>
                    </section>
                `;
            }

            container.innerHTML = html;
        }

        // ===== Search =====
        const searchInput = document.getElementById('search-input');
        const noResults = document.getElementById('no-results');

        function performSearch() {
            const query = searchInput.value.toLowerCase().trim();
            const toolItems = document.querySelectorAll('.tool-item');
            const sections = document.querySelectorAll('.tools-section');

            if (!query) {
                toolItems.forEach(item => item.classList.remove('hidden'));
                sections.forEach(section => section.style.display = 'block');
                noResults.classList.remove('visible');
                return;
            }

            let visibleCount = 0;

            toolItems.forEach(item => {
                const title = item.dataset.title || '';
                const description = item.dataset.description || '';
                const matches = title.includes(query) || description.includes(query);
                item.classList.toggle('hidden', !matches);
                if (matches) visibleCount++;
            });

            // Hide empty sections
            sections.forEach(section => {
                const visibleTools = section.querySelectorAll('.tool-item:not(.hidden)');
                section.style.display = visibleTools.length > 0 ? 'block' : 'none';
            });

            noResults.classList.toggle('visible', visibleCount === 0 && tools.length > 0);
        }

        searchInput.addEventListener('input', performSearch);

        // "/" keyboard shortcut
        document.addEventListener('keydown', (e) => {
            if (e.key === '/' && !['INPUT', 'TEXTAREA'].includes(document.activeElement.tagName)) {
                e.preventDefault();
                searchInput.focus();
                searchInput.select();
            }
        });

        // Initialize
        renderTools();
    </script>
</body>
</html>
